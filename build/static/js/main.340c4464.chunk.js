(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(47)},24:function(e,t,n){},25:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(12),r=n.n(o),c=(n(24),n(25),n(5)),s=n.n(c),l=n(13),h=n(2),d=n(3),u=n(16),m=n(14),v=n(17),w=function(){function e(){Object(h.a)(this,e)}return Object(d.a)(e,null,[{key:"drawLine",value:function(e,t,n,a,i){var o=e.getContext("2d");o.save(),o.strokeStyle=a,o.lineWidth=i,o.lineCap="round",o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(n.x+1,n.y+1),o.stroke(),o.restore()}},{key:"getImageDataAndScale",value:function(e,t){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=.5*e.width,n.height=.5*e.height,a.drawImage(e,0,0,n.width,n.height);var i=document.createElement("canvas");i.width=.5*n.width,i.height=.5*n.height,i.getContext("2d").drawImage(n,0,0,i.width,i.height);var o=document.createElement("canvas");o.width=.5*i.width,o.height=.5*i.height;var r=o.getContext("2d");r.fillStyle="#FFF",r.fillRect(0,0,o.width,o.height),r.drawImage(i,0,0,.5*i.width,.5*i.height);var c=document.createElement("canvas");c.width=20,c.height=20,c.getContext("2d").drawImage(o,0,0,20,20);var s=document.createElement("canvas");s.width=t,s.height=t;var l=s.getContext("2d");return l.fillStyle="#FFF",l.fillRect(0,0,t,t),l.drawImage(c,0,0,t,t),l.strokeStyle="#000",l.lineWidth=1,l.strokeRect(0,0,s.width,s.height),s.toDataURL()}},{key:"downsize",value:function(e,t){var n=e.getContext("2d"),a=new Image;a.height=e.height,a.width=e.width;var i=document.createElement("canvas"),o=i.getContext("2d");i.width=.5*a.width,i.height=.5*a.height,o.drawImage(a,0,0,i.width,i.height),o.drawImage(i,0,0,.5*i.width,.5*i.height),n.drawImage(i,0,0,.5*i.width,.5*i.height,0,0,e.width,e.height)}}]),e}(),g=n(15),p=n.n(g),f=window.location.hostname.includes("localhost")?"http://".concat(window.location.hostname,":8000/api/"):"https://".concat(window.location.hostname,"/api/"),E=p.a.create({baseURL:f,headers:{"Content-Type":"application/json"},withCredentials:!1}),y=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).uploadImage=function(){var e=Object(l.a)(s.a.mark(function e(t){var a,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={DataURI:t},e.next=3,E.post("predict",a);case 3:i=e.sent,o=i.data,n.setState({prediction:o});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.scale=function(e){var t=w.getImageDataAndScale(n.canvas,28);n.uploadImage(t)},n.clear=function(e){var t=n.canvas.getContext("2d");t.clearRect(0,0,n.canvas.width,n.canvas.height),t.fillStyle="#FFF",t.fillRect(0,0,n.canvas.width,n.canvas.height),n.isDrawing=!1,n.setState({prediction:null})},n.handleDrawStart=function(e){n.isDrawing=!0,n.handleMouseMove(e)},n.handleDrawEnd=function(){n.isDrawing=!1,n.previousMousePosition=null},n.handleMouseMove=function(e){var t=n.clientCoordinatesFromEvent(e);if(e.preventDefault(),e.stopPropagation(),t&&n.canvas){var a=n.canvas.getBoundingClientRect(),i={x:t.x-a.left,y:t.y-a.top};n.updateMousePosition(i)}n.isDrawing&&(n.draw(),setTimeout(n.scale(e),0))},n.previousMousePosition=null,n.mousePosition=null,n.isDrawing=!1,n.drawingBoardScale=1,n.state={prediction:null},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:"image/png"})}},{key:"componentDidMount",value:function(){var e=this.canvas.getContext("2d");e.fillStyle="#FFF",e.fillRect(0,0,this.canvas.width,this.canvas.height),window.addEventListener("mouseup",this.handleDrawEnd),window.addEventListener("touchend",this.handleDrawEnd)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleDrawEnd),window.removeEventListener("touchend",this.handleDrawEnd)}},{key:"updateMousePosition",value:function(e){this.previousMousePosition=this.previousMousePosition?this.mousePosition:e,this.mousePosition=e}},{key:"draw",value:function(){var e=40*this.drawingBoardScale;w.drawLine(this.canvas,this.previousMousePosition,this.mousePosition,"#000",e)}},{key:"clientCoordinatesFromEvent",value:function(e){return"clientX"in e?{x:e.clientX,y:e.clientY}:"undefined"!==typeof e.touches&&e.touches.length?{x:e.touches[0].clientX,y:e.touches[0].clientY}:null}},{key:"render",value:function(){var e=this,t=i.a.createElement("span",null," ");return null!=this.state.prediction&&(t=i.a.createElement("span",null,this.state.prediction)),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"}," ",i.a.createElement("p",{className:"text-center font-weight-light"},i.a.createElement("a",{href:"https://keyholesoftware.com"},"Keyhole Software's"),"  MNIST implementation recognizes numbers (0-9), source code ",i.a.createElement("a",{href:"https://github.com/in-the-keyhole/khs-neural-net"},"HERE")," "),"  ")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("div",{ref:function(t){return e.boardWrapper=t}},i.a.createElement("canvas",{width:400,height:400,ref:function(t){return e.canvas=t},onMouseMove:this.handleMouseMove,onMouseDown:this.handleDrawStart,onTouchStart:this.handleDrawStart,onTouchMove:this.handleMouseMove})),i.a.createElement("button",{onClick:this.clear},"Clear")),i.a.createElement("div",{className:"col-md-6"},i.a.createElement("p",{style:{fontSize:"50px"}},"Prediction"),i.a.createElement("div",{style:{fontSize:"200px"}},t))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"}," \xa0 "),i.a.createElement("div",{className:"col-md-12"}," ",i.a.createElement("p",{className:"text-center font-weight-light"},"Keep trying, this is a simple Perceptron Neural Net. Draw in center... "),"       ")))}}]),t}(a.Component);var x=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(y,null)))};n(46);r.a.render(i.a.createElement(x,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.340c4464.chunk.js.map